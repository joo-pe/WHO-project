<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <title>WHO TICKET</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/main.css}"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js" ></script>
    <script type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-1.1.5.js"></script>

</head>

<style>
    body{
        margin-top:20px;
        background:#eee;
    }
    .decor-default {
        background-color: #ffffff;
    }
    .contact .controls {
        position: relative;
    }

    .contact .controls .write {
        position: absolute;
        z-index: 2;
        right: 20px;
        bottom: -24px;
        width: 48px;
        height: 48px;
        border-radius: 24px;
        cursor: pointer;
        box-shadow: 0 4px 5px #d8d8d8;
        background: #39bee8  no-repeat 50% 50%;
    }
    .contact .controls .icon {
        position: absolute;
        z-index: 2;
        top: 18px;
        width: 16px;
        height: 16px;
        display: block;
        cursor: pointer;
    }
    .contact .controls .cover {
        display: block;
        margin: 0 auto;
        max-width: 100%;
        min-height: 150px;
    }
    .cover {
        position: relative;
        overflow: hidden;
        height: 500px;
    }
    .contact .controls .cont {
        position: absolute;
        z-index: 2;
        top: 80px;
        left: 0;
        right: 0;
        text-align: center;
    }
    .contact .controls .avatar {
        display: inline-block;
        width: 90px;
        height: 90px;
        border-radius: 45px;
        position: relative;
        z-index: 2;
    }
    .contact .controls .name {
        font-size: 20px;
        line-height: 36px;
        color: #ffffff;
        margin: 0 0 10px;
        position: relative;
        z-index: 2;
    }
    .contact .controls .ui-mark {
        display: inline-block;
        border: 1px solid #ffffff;
        font-size: 16px;
        line-height: 32px;
        color: #ffffff;
        text-align: center;
        margin: 0 2px;
        padding: 0 26px;
        border-radius: 2px;
        position: relative;
        z-index: 2;
    }

    .container-contact div[class^="col-"] {
        position: relative;
        min-height: 1px;
        padding-left: 20px;
        padding-right: 20px;
        padding-top: 20px;
    }
    .contact-description {
        font-size: 16px;
        line-height: 36px;
    }
    .bg-red {
        background-color: #f75353 !important;
    }
    a.ui-btn{
        display: inline-block;
        margin: 0px 5px 8px 0px;
        padding: 5px 10px;
        color: #fff;
        font-size: 13px;
        line-height: 23px;
        font-weight: 600;
        border-radius: 2px;
        float: right;
    }
    a.ui-btn > i{
        border-right: 1px solid rgba(0,0,0,0.1);
        padding-right: 7px;
        margin-right: 3px;
    }
</style>
<body id="myPage" data-spy="scroll" data-target=".navbar" data-offset="60">
<!-- Header -->
    <div th:insert="common/header.html" id="header"></div>

    <div class="container container-contact bootstrap snippets bootdeys bootdey">
        <div class="row decor-default">
            <div class="col-md-12">
                <div class="contact">
                    <div class="controls">
                        <span class="icon icon-folder" data-toggle="tooltip" data-placement="top" title="" data-original-title="Archive"></span>
                        <span class="icon icon-delete" data-toggle="tooltip" data-placement="top" title="" data-original-title="Delete"></span>
                        <span class="icon icon-close" data-toggle="tooltip" data-placement="top" title="" data-original-title="Close"></span>
                        <span class="write" data-toggle="tooltip" data-placement="top" title="" data-original-title="New"></span>
                        <img th:src="@{/images/39f6855d839d6a1fe475194fd48332b7.png}" alt="cover" class="cover">
                    </div>

                    <div class="row">
                        <div class="col-md-4 col-md-5 col-xs-12">
                            <div class="row">
                                <div class="col-xs-3">
                                    일정:
                                </div>
                                <div class="col-xs-9">
                                    <p th:text="${#temporals.format(sportsDto.dateTime, 'yyyy년 MM월 dd일 EEEE')}"></p>
                                </div>
                                <div class="col-xs-3">
                                    장소:
                                </div>
                                <div class="col-xs-9">
                                    <p th:text="${sportsDto.location}"></p>
                                </div>
                                <div class="col-xs-3">
                                    홈팀:
                                </div>
                                <div class="col-xs-9">
                                    <p th:text="${sportsDto.team1}"></p>
                                </div>
                                <div class="col-xs-3">
                                    원정팀:
                                </div>
                                <div class="col-xs-9">
                                    <p th:text="${sportsDto.team2}"></p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-8 col-md-7 col-xs-12">
                            <p class="contact-description" th:text="${sportsDto.detail}"></p>
                            <!-- Buttons -->
<!--                            <button id="pay">결제하기</button>-->
                            <a th:href="@{'/soccer/post/' + ${sportsDto.id} + '/pay'}" class="ui-btn bg-red"><i class="fa fa-ticket"></i>Buy</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    $("#pay").click(function () {
        var IMP = window.IMP;
        IMP.init("imp96244254") //가맹점 식별

        // 결제창 호출 : 지정한 pg사의 결제모듈 창 나타나거나 pg사의 웹사이트로 리다이렉트
        IMP.request_pay({ //parameter
            pg: 'html5_inicis',
            pay_method: 'card',
            merchant_uid: 'merchant_' + new Date().getTime(),
            name: '주문명 : 결제테스트',
            amount: 5000,
            buyer_email: 'ellendusrud@naver.com',
            buyer_name: '김연경',
            buyer_tel: '010-1234-5678'
        }, function (rsp) { //calback
            console.log(rsp);
            if (rsp.success) { //결제 성공 시 로직
                var msg = '결제가 완료되었습니다.';
                msg += '고유ID : ' + rsp.imp_uid;
                msg += '상점 거래ID : ' + rsp.merchant_uid;
                msg += '결제 금액 : ' + rsp.paid_amount;
                msg += '카드 승인번호 : ' + rsp.apply_num;
            } else { //결제 실패 시 로직
                var msg = '결제에 실패하였습니다 : ';
                msg += rsp.error_msg;
            }
            alert(msg);
        });
    });
</script>
</html>
